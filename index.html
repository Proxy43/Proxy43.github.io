<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å³¶é–“é›»é‰„ Robloxã‚²ãƒ¼ãƒ ç”¨ ã‚¢ãƒŠã‚¦ãƒ³ã‚¹</title>
<style>
  body {
    background: #001022;
    color: #cfffd8;
    font-family: "Segoe UI", sans-serif;
    text-align: center;
    padding: 40px;
  }
  h1 {
    margin-bottom: 1em;
  }
  #announcementButtons {
    margin-bottom: 25px;
  }
  #announcementButtons button {
    background: #004466;
    color: #ccffcc;
    border: none;
    padding: 10px 20px;
    margin: 0 8px;
    font-size: 1em;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 6px #00ff88;
  }
  #announcementButtons button:hover {
    background: #006688;
  }
  #category, #stationName, #led {
    font-family: monospace;
    background: #002033;
    padding: 15px;
    margin: 12px auto;
    border-radius: 8px;
    width: 90%;
    max-width: 700px;
    box-shadow: 0 0 15px #00ffa5;
  }
  #stationName {
    font-size: 2em;
  }
  #led {
    color: #00ff00;
    font-size: 1.4em;
  }
  #category {
    font-weight: bold;
    font-size: 1.2em;
  }
  .announce {
    margin: 12px 0;
    font-size: 1.3em;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }
  button.control {
    background: #004466;
    color: #ccffcc;
    border: none;
    padding: 12px 28px;
    margin: 10px 6px;
    font-size: 1em;
    border-radius: 10px;
    cursor: pointer;
    box-shadow: 0 0 6px #00ff88;
  }
  button.control:hover:enabled {
    background: #006688;
  }
  button.control:disabled {
    background: #003344;
    cursor: default;
    box-shadow: none;
  }
</style>
</head>
<body>

  <h1>ğŸš‰ å³¶é–“é›»é‰„ Robloxã‚²ãƒ¼ãƒ ç”¨ ã‚¢ãƒŠã‚¦ãƒ³ã‚¹</h1>

  <div id="announcementButtons">
    <button onclick="manualPlayCategory('normal')">â–¶ é€šå¸¸ã‚¢ãƒŠã‚¦ãƒ³ã‚¹</button>
    <button onclick="manualPlayCategory('delay')">â–¶ é…å»¶ã‚¢ãƒŠã‚¦ãƒ³ã‚¹</button>
    <button onclick="manualPlayCategory('pass')">â–¶ é€šéã‚¢ãƒŠã‚¦ãƒ³ã‚¹</button>
  </div>

  <div id="category">ã‚«ãƒ†ã‚´ãƒªï¼š--</div>
  <div id="stationName">ç¾åœ¨ã®é§…ï¼š--</div>
  <div id="led">LEDè¡¨ç¤ºï¼š--</div>

  <div class="announce" id="jp">---</div>
  <div class="announce" id="en">---</div>

  <button id="stopBtn" class="control" onclick="stopAnnouncement()" disabled>â¹ ä¸­æ–­</button>
  <button id="startBtn" class="control" onclick="startAutoAnnouncements()">â–¶ è‡ªå‹•å†ç”Ÿé–‹å§‹</button>

<script>
  const announcements = {
    normal: [
      {
        category: "é€šå¸¸",
        name: "æ½®é¢¨æ¸¯ï¼ˆã—ãŠã‹ãœã“ã†ï¼‰",
        led: "æ½®é¢¨æ¸¯ã€€å§‹ç™ºé§…ã€€å‡ºç™ºã—ã¾ã™",
        jp: "æ¬¡ã¯ã€æ½®é¢¨æ¸¯ã€‚å§‹ç™ºé§…ã§ã™ã€‚ã¾ã‚‚ãªãç™ºè»Šã„ãŸã—ã¾ã™ã€‚",
        en: "Next stop: Shiokaze Port. This is the first station. We will be departing shortly."
      },
      {
        category: "é€šå¸¸",
        name: "æ£®ãƒä¸˜ï¼ˆã‚‚ã‚Šã®ãŠã‹ï¼‰",
        led: "æ£®ãƒä¸˜ã€€å³å´ã®ãƒ‰ã‚¢ãŒé–‹ãã¾ã™",
        jp: "æ¬¡ã¯ã€æ£®ãƒä¸˜ã€‚å³å´ã®ãƒ‰ã‚¢ãŒé–‹ãã¾ã™ã€‚è‡ªç„¶å…¬åœ’ã¸ãŠè¶Šã—ã®æ–¹ã¯ã“ã¡ã‚‰ã§ãŠé™ã‚Šãã ã•ã„ã€‚",
        en: "Next stop: Mori no Oka. Doors will open on the right. This stop is for the Nature Park."
      },
      {
        category: "é€šå¸¸",
        name: "ä¸­å¤®å³¶ï¼ˆã¡ã‚…ã†ãŠã†ã˜ã¾ï¼‰",
        led: "ä¸­å¤®å³¶ã€€å·¦å´ã®ãƒ‰ã‚¢ãŒé–‹ãã¾ã™",
        jp: "æ¬¡ã¯ã€ä¸­å¤®å³¶ã€‚å·¦å´ã®ãƒ‰ã‚¢ãŒé–‹ãã¾ã™ã€‚å³¶é–“ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«ã¯ä¸­å¤®æ”¹æœ­ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚",
        en: "Next stop: Chuo-jima. Doors will open on the left. Please use the central gate for the Shimakan Mall."
      }
    ],
    delay: [
      {
        category: "é…å»¶",
        name: "é…å»¶æƒ…å ±",
        led: "é…å»¶æ³¨æ„ã€€äººèº«äº‹æ•…ç™ºç”Ÿ",
        jp: "ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚æœ¬æ—¥ã€ä»Šæœäººèº«äº‹æ•…ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å®…çƒå ´å‰ã‹ã‚‰æŸåŒºé–“ã«ãŠã„ã¦ã€å¤šãã®ãŠå®¢æ§˜ã«ã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ã¦ãŠã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚",
        en: "Attention please. A personal injury accident occurred this morning. Between Takakyujo-mae and Kashiwa sections, many customers are inconvenienced. We apologize for the trouble."
      },
      {
        category: "é…å»¶",
        name: "é§…å†…é…å»¶ãŠè©«ã³",
        led: "é…å»¶ãŠè©«ã³ã€€ã”è¿·æƒ‘ãŠã‹ã‘ã—ã¾ã™",
        jp: "é§…æ§‹å†…ã®é…å»¶ã«é–¢ã—ã¾ã—ã¦ã€ã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ã¦ãŠã‚Šã¾ã™ã“ã¨ã‚’æ·±ããŠè©«ã³ç”³ã—ä¸Šã’ã¾ã™ã€‚ä»Šå¾Œã®é‹è¡Œã«ã”æ³¨æ„ãã ã•ã„ã€‚",
        en: "We sincerely apologize for the delay within the station. Please be aware of the upcoming train operations."
      }
    ],
    pass: [
      {
        category: "é€šé",
        name: "æ·±å±±é§…ï¼ˆã¿ã‚„ã¾ãˆãï¼‰",
        led: "æ·±å±±é§… é€šé",
        jp: "ã“ã®é›»è»Šã¯æ·±å±±é§…ã‚’é€šéã—ã¾ã™ã€‚ã”æ³¨æ„ãã ã•ã„ã€‚",
        en: "This train will pass Miyama Station. Please be careful."
      },
      {
        category: "é€šé",
        name: "å¤§å·é§…ï¼ˆãŠãŠã‹ã‚ãˆãï¼‰",
        led: "å¤§å·é§… é€šé",
        jp: "ã“ã®é›»è»Šã¯å¤§å·é§…ã‚’é€šéã—ã¾ã™ã€‚ãŠæ€¥ãã®æ–¹ã¯ã”åˆ©ç”¨ãã ã•ã„ã€‚",
        en: "This train will pass Okawa Station. For those in a hurry, please note."
      }
    ]
  };

  // å„ç¨®ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†
  const indices = { normal: 0, delay: 0, pass: 0 };

  let normalTimer = null;
  let delayTimer = null;
  let passTimer = null;

  // éŸ³å£°èª­ã¿ä¸Šã’é–¢æ•°
  function speak(text, lang, onEnd = null) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = lang;
    if (onEnd) utterance.onend = onEnd;
    speechSynthesis.speak(utterance);
  }

  // ã‚¢ãƒŠã‚¦ãƒ³ã‚¹å†ç”Ÿé–¢æ•°ï¼ˆãƒªã‚¹ãƒˆã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŒ‡å®šï¼‰
  function playAnnouncementList(list, index) {
    if (index >= list.length) index = 0;
    const ann = list[index];

    document.getElementById("category").textContent = "ã‚«ãƒ†ã‚´ãƒªï¼š" + ann.category;
    document.getElementById("stationName").textContent = (ann.category === "é…å»¶" || ann.category === "é€šé" ? "æ¡ˆå†…ï¼š" : "ç¾åœ¨ã®é§…ï¼š") + ann.name;
    document.getElementById("led").textContent = "LEDè¡¨ç¤ºï¼š" + ann.led;
    document.getElementById("jp").textContent = ann.jp;
    document.getElementById("en").textContent = ann.en;

    speak(ann.jp, "ja-JP", () => {
      speak(ann.en, "en-US");
    });

    return index + 1;
  }

  // æ‰‹å‹•ã§ç‰¹å®šã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã‚’å†ç”Ÿ
  function manualPlayCategory(category) {
    if (!(category in announcements)) return;
    indices[category] = playAnnouncementList(announcements[category], indices[category]);
  }

  // è‡ªå‹•ã‚¢ãƒŠã‚¦ãƒ³ã‚¹é–‹å§‹
  function startAutoAnnouncements() {
    if (normalTimer || delayTimer || passTimer) return; // ã™ã§ã«å‹•ä½œä¸­ã¯ç„¡è¦–

    document.getElementById("startBtn").disabled = true;
    document.getElementById("stopBtn").disabled = false;

    // å³æ™‚ä¸€å›å†ç”Ÿ
    indices.normal = playAnnouncementList(announcements.normal, indices
